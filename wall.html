<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>메시지 월</title>
  <style>
    body {
      background: #f4f4f4;
      overflow: hidden;
      height: 100vh;
      margin: 0;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    #wall {
      width: 90%;
      height: 90%;
      background: #fffde7;
      position: relative;
      border: 2px solid #ddd;
      box-shadow: inset 0 0 20px rgba(0,0,0,0.1);
    }
    .note {
      position: absolute;
      width: 180px;
      min-height: 100px;
      padding: 10px;
      border-radius: 8px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      cursor: move;
      font-family: sans-serif;
      user-select: none;
      transition: transform 0.1s ease;
    }
    .note:hover { transform: scale(1.05); }
  </style>
</head>
<body>
  <div id="wall"></div>

  <script>
    const wall = document.getElementById("wall");
    const notes = JSON.parse(localStorage.getItem("notes")) || [];

    notes.forEach((note, index) => {
      const div = document.createElement("div");
      div.className = "note";
      div.textContent = note.text;
      div.style.background = note.color;
      div.style.left = note.x + "px";
      div.style.top = note.y + "px";

      // 드래그 기능
      let offsetX, offsetY;
      div.onmousedown = function (e) {
        offsetX = e.clientX - div.offsetLeft;
        offsetY = e.clientY - div.offsetTop;
        document.onmousemove = function (e) {
          div.style.left = (e.clientX - offsetX) + "px";
          div.style.top = (e.clientY - offsetY) + "px";
        };
        document.onmouseup = function () {
          document.onmousemove = null;
        };
      };

      // 클릭 시 삭제 확인
      div.onclick = function () {
        if (confirm("이 포스트잇을 삭제할까요?")) {
          notes.splice(index, 1);
          localStorage.setItem("notes", JSON.stringify(notes));
          wall.removeChild(div);
        }
      };

      wall.appendChild(div);
    });
  </script>
</body>
</html>
